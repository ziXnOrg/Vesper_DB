{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://vesper.dev/schema/experiment.v1.json",
  "title": "Vesper Experiment Config (YAML/JSON)",
  "type": "object",
  "additionalProperties": false,
  "required": [
    "run_id",
    "prompt_files",
    "model",
    "decoding",
    "datasets",
    "seeds",
    "metrics",
    "gates",
    "outputs"
  ],
  "properties": {
    "run_id": { "type": "string" },
    "prompt_files": {
      "type": "array",
      "minItems": 1,
      "items": { "type": "string", "pattern": "^(https?://|file://|(?!(/|[A-Za-z]:\\\\))[A-Za-z0-9._/\\-]+$)" }
    },
    "model": {
      "type": "object",
      "additionalProperties": false,
      "required": ["name", "family"],
      "properties": {
        "name": { "type": "string" },
        "family": { "type": "string", "enum": ["openai", "anthropic", "gemini", "llama", "other"] }
      }
    },
    "decoding": {
      "type": "object",
      "additionalProperties": false,
      "required": ["temperature", "top_p", "n", "seed"],
      "properties": {
        "temperature": { "const": 0.0 },
        "top_p": { "const": 1.0 },
        "n": { "const": 1 },
        "seed": { "type": "integer" }
      }
    },
    "datasets": { "type": "array", "items": { "type": "string" } },
    "seeds": { "type": "array", "minItems": 1, "items": { "type": "integer" } },
    "metrics": { "type": "array", "items": { "type": "string" } },
    "gates": { "type": "object", "additionalProperties": { "type": "number" } },
    "outputs": {
      "type": "object",
      "additionalProperties": false,
      "required": ["dir"],
      "properties": { "dir": { "type": "string" } }
    },
    "notes": { "type": "string" }
  }
}

